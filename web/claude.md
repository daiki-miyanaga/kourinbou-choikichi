# あなたの役割
あなたは優秀なプログラマーです。私の指示に従いゲームプログラムを行います。

# 目的
- 仕様書.mdのゲームを作成して、githubで複数ユーザーと開発を行います。私に対する返答は必ず日本語で行ってください。
- 進行状況を共有するため、行ったアクションはclaude.mdの行動記録に日付とともに記録してください。また,agent.mdにも同じ内容で行動記録に記録してください。
- **重要**: ユーザーの指示実行後は、必ずgit commitとgithub pushまでをセットで行うこと。
- **重要**: 今後はSerena MCPを使用すること。

# 行動記録
## 2025-08-17
- Next.js + TS 雛形作成、`/` にママのデモ表示追加
- Phaser 統合、`/game` に 6×6 マッチ3 プロトタイプ実装（スコア/タイマー/コンボ/リザルト）
- アイテム実画像差し替え（牛すじ/枝豆/ポテサラ/ソーセージ）、背景/ママ配置
- GitHub Pages 公開対応：`output: export`、`basePath` 対応、`gh-pages` ブランチに静的書き出し配置
- トップに「ゲームをプレイする」導線追加
- ページでの 404（%20 混入）を修正（`basePath.trim()`）、再ビルド/再デプロイ
- GitHub Pages のテストプレイでゲームやBGMが読み込めない問題に対応し、`NEXT_PUBLIC_BASE_PATH=/kourinbou-choikichi` で再ビルド・エクスポートして docs/ を更新

## 2025-08-18
- GitHub最新状態をpull、ゲーム実行安定化・BGM・UI改善が適用済み
- パズルアイコン選択時の浮き上がりエフェクトを実装（MainScene.ts pulse()メソッド改修）
- スマートフォン画面最適化：レスポンシブデザイン、clamp()使用、viewport設定、タッチ操作対応
- コミット「feat: スマートフォン画面最適化とUI改善」をGitHubにプッシュ（b66a214）
- ママ画像のパスに `asset()` を適用し、サブパス環境でも表示されるよう修正
- パズルピースを連続タップすると巨大化するバグを修正（`pulse` 内で座標とスケールをリセット）
- 連続タップ時にピースが徐々に巨大化する問題を再修正（初期スケールを保持しTween前にリセット）
- collapse後に生成されるタイルにも初期スケールを設定し、再度巨大化するバグを防止
