# プロジェクト要件定義書（ドラフト）

## 1. 概要
- プロジェクト名: katamachi-choikichi（仮）
- 背景/課題: （例）片町エリアの来訪者体験を向上し、飲食店回遊を促進する。
- 目的/KPI: （例）来店数+20%、回遊率+15%、リピート率+10%。
- 成果物: Webアプリ（PC/スマホ対応）、運用手順、ドキュメント一式。

## 2. 用語定義
- 用語A: 説明
- 用語B: 説明

## 3. ステークホルダー
- 発注者/事業責任者: 役割
- プロダクトオーナー: 役割
- 開発/デザイン/運用チーム: 役割

## 4. スコープ
- 対象: 対象範囲を明記
- 非対象: 本プロジェクト外を明記

## 5. ユーザー/ペルソナ
- ペルソナ1: 属性、ニーズ、課題
- ペルソナ2: 属性、ニーズ、課題

## 6. ユースケース/主要シナリオ
- UC-01: シナリオ概要、期待結果
- UC-02: シナリオ概要、期待結果

## 7. 要求機能一覧（MVP → 拡張）
| ID | 機能 | 概要 | 優先度 |
|---|---|---|---|
| F-01 | ユーザー登録/ログイン | OAuth/メール認証 | Must |
| F-02 | 店舗検索/閲覧 | キーワード/カテゴリ/地図 | Must |
| F-03 | 回遊ルート提案 | 滞在時間/混雑/嗜好 | Should |
| F-04 | クーポン発行/利用 | 動的配布、利用履歴 | Should |
| F-05 | お気に入り/履歴 | マイページで管理 | Could |

## 8. 非機能要件
- パフォーマンス: LCP<2.5s、API p95<300ms
- 可用性: 99.9%/月（運用時）
- セキュリティ: OWASP ASVS L2相当、個人情報保護
- 信頼性: ログ/監視/アラート整備
- 拡張性: モジュール化、APIファースト
- 可観測性: 分散トレーシング、構造化ログ

## 9. 画面/情報設計（雛形）
- 画面一覧: トップ、検索、店舗詳細、ルート、マイページ
- 画面遷移図: （図のリンク/追記予定）
- 情報設計: 主要コンポーネント、優先度、空状態

## 10. API 仕様（ドラフト）
- 認証: OAuth2/OIDC、セッション/トークン戦略
- エンドポイント例:
  - GET `/api/stores?query=&category=&lat=&lng=`
  - GET `/api/stores/{id}`
  - POST `/api/coupons/{id}/redeem`
- エラーモデル: `code`, `message`, `details`

## 11. データモデル（概略）
- User(id, email, name, favorites[])
- Store(id, name, category, geo, openingHours)
- Coupon(id, storeId, type, expiry, used)
- Visit(userId, storeId, at, via)

## 12. 品質/テスト方針
- レベル: Unit/E2E/アクセシビリティ/負荷
- 基準: 重要フローのE2E成功率100%、a11yスコア90+

## 13. スケジュール（例）
- W1-2: 企画/要件定義
- W3-4: 設計/雛形作成
- W5-8: 実装/内部テスト
- W9: 公開準備/運用設計

## 14. リスクと対策
- データ不足 → 代替指標/段階導入
- スコープ肥大化 → MVP優先、段階リリース

## 15. 運用/保守
- 監視: SLA/SLO、インシデント対応手順
- バックアップ/復旧: RPO/RTO目標

## 16. 変更管理
- Issue/PR 運用、リリースノート作成

---
メモ: 本書はドラフトです。決定事項は「確定」マークを付与。
